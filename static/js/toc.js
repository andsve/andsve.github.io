function generate_toc(elements, toc_holder, show_toc) {
	
	var toc_html = "<ul>";
	for (var i = 0; i < elements.length; i++)
	{
		var anchor = elements[i];
		var new_id = anchor.innerHTML.replace(/\s+/g, '-').toLowerCase();
		anchor.id = new_id;

		toc_html += "<li><a href='#" + new_id + "'>" + anchor.innerHTML + "</a></li>";

	}
	toc_html += "</ul>";

	if (show_toc)
	{
		toc_holder.innerHTML = toc_html;
	} else {
		toc_holder.innerHTML = "";
	}

}


window.onload = function() {
	generate_toc($("#content>h2"), $("#toc")[0], false);

	// ugly hack to jump to correct anchor that was generated by generate_toc()
	var old_hash = window.location.hash;
	window.location.hash = ""; 
	window.location.hash = old_hash;
	
}